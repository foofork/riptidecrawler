# ============================================================================
# RipTide Environment Configuration
# ============================================================================
#
# This file contains all environment variables used by RipTide API, CLI, and
# associated services. Copy this file to `.env` and update with your values.
#
# NAMING CONVENTION:
# - All RipTide variables: RIPTIDE_*
# - Output directories: RIPTIDE_*_OUTPUT_DIR or RIPTIDE_OUTPUT_*_DIR
# - Service URLs: RIPTIDE_*_URL or *_URL
# - Timeouts: RIPTIDE_*_TIMEOUT_SECS or *_TIMEOUT
# - Limits: RIPTIDE_*_LIMIT or RIPTIDE_MAX_*
#
# For detailed documentation, see: docs/configuration/ENVIRONMENT_VARIABLES.md
# ============================================================================

# ============================================================================
# üöÄ QUICK START: Docker Deployment (Set These First!)
# ============================================================================
# For Docker deployment, you only need to configure these essentials.
# All other settings below have sensible defaults.
#
# 1. Copy this file: cp .env.example .env
# 2. Set SERPER_API_KEY below (required)
# 3. Run: make docker-up
#
# See: docs/DEPLOYMENT_GUIDE.md for complete guide
# ============================================================================

# REQUIRED: Search API Key (get free key at https://serper.dev)
# SERPER_API_KEY=your_serper_key_here

# OPTIONAL: LLM Integration (for AI-powered extraction)
# OPENAI_API_KEY=your_openai_key_here
# ANTHROPIC_API_KEY=your_anthropic_key_here

# Docker Ports (defaults work for most setups)
# RIPTIDE_API_PORT=8080
# SWAGGER_PORT=8081
# HEADLESS_PORT=9123
# REDIS_PORT=6379

# Chrome Mode: Use microservices architecture (recommended for production)
# HEADLESS_URL=http://riptide-headless:9123  # Set this for Docker deployment
# Comment out HEADLESS_URL to use local Chrome (requires Chrome in API container)

# Logging Level (info, debug, trace)
# RUST_LOG=info

# Stack traces on errors (0 for disabled, 1 for enabled)
# RUST_BACKTRACE=1

# ============================================================================
# üìã ADVANCED CONFIGURATION BELOW
# ============================================================================
# The settings below are optional and have sensible defaults.
# Only modify if you need custom behavior.
# ============================================================================

# ============================================================================
# Output Directory Configuration
# ============================================================================

# Base output directory for all RipTide artifacts
RIPTIDE_OUTPUT_DIR=./riptide-output

# Subdirectories for different output types (optional overrides)
# These default to ${RIPTIDE_OUTPUT_DIR}/<subdir> if not specified
RIPTIDE_SCREENSHOTS_DIR=${RIPTIDE_OUTPUT_DIR}/screenshots
RIPTIDE_HTML_DIR=${RIPTIDE_OUTPUT_DIR}/html
RIPTIDE_PDF_DIR=${RIPTIDE_OUTPUT_DIR}/pdf
RIPTIDE_DOM_DIR=${RIPTIDE_OUTPUT_DIR}/dom
RIPTIDE_HAR_DIR=${RIPTIDE_OUTPUT_DIR}/har
RIPTIDE_REPORTS_DIR=${RIPTIDE_OUTPUT_DIR}/reports
RIPTIDE_CRAWL_DIR=${RIPTIDE_OUTPUT_DIR}/crawl
RIPTIDE_SESSIONS_DIR=${RIPTIDE_OUTPUT_DIR}/sessions
RIPTIDE_ARTIFACTS_DIR=${RIPTIDE_OUTPUT_DIR}/artifacts
RIPTIDE_TEMP_DIR=${RIPTIDE_OUTPUT_DIR}/temp
RIPTIDE_LOGS_DIR=${RIPTIDE_OUTPUT_DIR}/logs
RIPTIDE_CACHE_DIR=${RIPTIDE_OUTPUT_DIR}/cache

# ============================================================================
# CLI Configuration
# ============================================================================

# API endpoint URL (for CLI usage)
RIPTIDE_API_URL=http://localhost:8080

# API authentication key
RIPTIDE_API_KEY=your_api_key_here

# CLI operation mode: api_first, api_only, or direct
# - api_first: Try API first, fallback to direct
# - api_only: API only, fail if unavailable
# - direct: Direct extraction only (no API)
RIPTIDE_CLI_MODE=api_first

# Default output format: json, text, table, markdown
RIPTIDE_CLI_OUTPUT_FORMAT=text

# Enable verbose CLI output
RIPTIDE_CLI_VERBOSE=false

# WASM module path for CLI operations
RIPTIDE_WASM_PATH=./target/wasm32-wasi/release/riptide-extraction.wasm

# ============================================================================
# Core Services
# ============================================================================

# Redis connection URL for caching and persistence
REDIS_URL=redis://localhost:6379/0

# Headless browser service URL
HEADLESS_URL=http://localhost:9123

# API server host and port
RIPTIDE_API_HOST=0.0.0.0
RIPTIDE_API_PORT=8080

# ============================================================================
# RIPTIDE-API: Search Provider Configuration (6 variables)
# ============================================================================
#
# SEARCH BACKEND OPTIONS:
#
# 1. "none" (Default, No Dependencies)
#    - No external API required
#    - Parses URLs directly from search query
#    - Best for: Development, direct URL extraction
#    - Cost: FREE
#    - Example: SEARCH_BACKEND=none
#
# 2. "serper" (Google Search via Serper.dev)
#    - Requires: SERPER_API_KEY (get from https://serper.dev)
#    - Provides: Real Google search results
#    - Best for: Production search features
#    - Cost: Paid API (5,000 free searches/month)
#    - Example: SEARCH_BACKEND=serper
#
# 3. "searxng" (Self-Hosted Search)
#    - Requires: SEARXNG_BASE_URL (your SearXNG instance)
#    - Provides: Privacy-focused meta-search
#    - Best for: Privacy-conscious deployments
#    - Cost: FREE (self-hosted)
#    - Example: SEARCH_BACKEND=searxng
#
# ============================================================================

# Search backend to use: "serper", "none", or "searxng"
# Default: "none" (no external dependencies)
RIPTIDE_SEARCH_BACKEND=none

# Legacy search backend env var (for compatibility with older versions)
# Use RIPTIDE_SEARCH_BACKEND instead for new deployments
SEARCH_BACKEND=none

# Default timeout for search operations in seconds
RIPTIDE_SEARCH_TIMEOUT_SECS=30

# Enable URL parsing for None provider (true/false)
# When true, the None backend extracts URLs from the search query
RIPTIDE_SEARCH_ENABLE_URL_PARSING=true

# Circuit breaker failure threshold percentage (0-100)
RIPTIDE_SEARCH_CIRCUIT_BREAKER_FAILURE_THRESHOLD=50

# Circuit breaker minimum requests before opening
RIPTIDE_SEARCH_CIRCUIT_BREAKER_MIN_REQUESTS=5

# Circuit breaker recovery timeout in seconds
RIPTIDE_SEARCH_CIRCUIT_BREAKER_RECOVERY_TIMEOUT_SECS=60

# ============================================================================
# SEARCH BACKEND: Serper.dev Configuration (Option 2)
# ============================================================================
# Serper.dev API key (required ONLY when SEARCH_BACKEND=serper)
# Get your API key from: https://serper.dev
# Leave empty or unset if using SEARCH_BACKEND=none or searxng
#
# SERPER_API_KEY=your_serper_api_key_here

# ============================================================================
# SEARCH BACKEND: SearXNG Configuration (Option 3)
# ============================================================================
# SearXNG instance URL (required ONLY when SEARCH_BACKEND=searxng)
# Example: http://localhost:8888 or https://searx.example.com
# Leave empty or unset if using SEARCH_BACKEND=none or serper
#
# SEARXNG_BASE_URL=http://localhost:8888

# ============================================================================
# GRACEFUL DEGRADATION
# ============================================================================
# If SEARCH_BACKEND=serper but SERPER_API_KEY is not set:
#   - System automatically falls back to SEARCH_BACKEND=none
#   - Warning logged but service continues to function
#   - /api/search endpoint returns helpful error message
#
# If SEARCH_BACKEND=searxng but SEARXNG_BASE_URL is not set:
#   - System automatically falls back to SEARCH_BACKEND=none
#   - Warning logged but service continues to function
#
# This ensures the API never fails to start due to missing search config
# ============================================================================

# ============================================================================
# RIPTIDE-API: Resource Management (7 variables)
# ============================================================================

# Maximum concurrent render operations
RIPTIDE_MAX_CONCURRENT_RENDERS=10

# Maximum concurrent PDF operations (semaphore limit)
RIPTIDE_MAX_CONCURRENT_PDF=2

# Maximum concurrent WASM instances
RIPTIDE_MAX_CONCURRENT_WASM=4

# Global request timeout in seconds
RIPTIDE_GLOBAL_TIMEOUT_SECS=30

# Resource cleanup interval in seconds
RIPTIDE_CLEANUP_INTERVAL_SECS=60

# Enable resource monitoring (true/false)
RIPTIDE_ENABLE_MONITORING=true

# Resource pool health check interval in seconds
RIPTIDE_HEALTH_CHECK_INTERVAL_SECS=30

# ============================================================================
# RIPTIDE-API: Performance Configuration (7 variables)
# ============================================================================

# Hard timeout for render operations (3s requirement)
RIPTIDE_RENDER_TIMEOUT_SECS=3

# Timeout for PDF processing operations in seconds
RIPTIDE_PDF_TIMEOUT_SECS=10

# Timeout for WASM extraction operations in seconds
RIPTIDE_WASM_TIMEOUT_SECS=5

# Timeout for HTTP requests in seconds
RIPTIDE_HTTP_TIMEOUT_SECS=10

# Memory cleanup threshold in MB
RIPTIDE_MEMORY_CLEANUP_THRESHOLD_MB=512

# Enable automatic cleanup on timeouts (true/false)
RIPTIDE_AUTO_CLEANUP_ON_TIMEOUT=true

# Performance degradation detection threshold (0.0-1.0)
RIPTIDE_DEGRADATION_THRESHOLD=0.8

# ============================================================================
# RIPTIDE-API: Rate Limiting Configuration (7 variables)
# ============================================================================

# Enable rate limiting (true/false)
RIPTIDE_RATE_LIMIT_ENABLED=true

# Rate limit: requests per second per host (1.5 RPS requirement)
RIPTIDE_RATE_LIMIT_RPS=1.5

# Rate limit jitter factor (0.0-1.0)
RIPTIDE_RATE_LIMIT_JITTER=0.1

# Burst capacity per host
RIPTIDE_RATE_LIMIT_BURST_CAPACITY=3

# Rate limit window duration in seconds
RIPTIDE_RATE_LIMIT_WINDOW_SECS=60

# Cleanup interval for rate limit storage in seconds
RIPTIDE_RATE_LIMIT_CLEANUP_INTERVAL_SECS=300

# Maximum number of tracked hosts
RIPTIDE_RATE_LIMIT_MAX_TRACKED_HOSTS=10000

# ============================================================================
# RIPTIDE-API: Headless Browser Configuration (9 variables)
# ============================================================================

# Maximum browser pool size (requirement: pool cap = 3)
RIPTIDE_HEADLESS_MAX_POOL_SIZE=3

# Minimum browser pool size
RIPTIDE_HEADLESS_MIN_POOL_SIZE=1

# Browser idle timeout in seconds
RIPTIDE_HEADLESS_IDLE_TIMEOUT_SECS=300

# Browser health check interval in seconds
RIPTIDE_HEADLESS_HEALTH_CHECK_INTERVAL_SECS=60

# Maximum pages per browser instance
RIPTIDE_HEADLESS_MAX_PAGES_PER_BROWSER=10

# Browser restart threshold (failed operations)
RIPTIDE_HEADLESS_RESTART_THRESHOLD=5

# Enable browser recycling (true/false)
RIPTIDE_HEADLESS_ENABLE_RECYCLING=true

# Browser launch timeout in seconds
RIPTIDE_HEADLESS_LAUNCH_TIMEOUT_SECS=30

# Maximum retries for browser operations
RIPTIDE_HEADLESS_MAX_RETRIES=3

# ============================================================================
# Chrome Launch Configuration (Advanced - Headless Service Only)
# ============================================================================
# ‚ö†Ô∏è ADVANCED USERS ONLY - Default flags are already optimized!
#
# The code automatically uses Docker-optimized Chrome flags:
#   --no-sandbox --disable-dev-shm-usage --disable-gpu --disable-crash-reporter
#   --crash-dumps-dir=/tmp --disable-breakpad (and 8 more optimizations)
#
# Only set CHROME_FLAGS if you need custom behavior (overrides ALL defaults):
# CHROME_FLAGS="--no-sandbox --headless --disable-gpu --your-custom-flag"
#
# Chrome binary path (usually auto-detected):
# CHROME_BIN=/usr/bin/chromium
# CHROME_PATH=/usr/bin/chromium
#
# ‚úÖ Chrome 128+ Fix (Already set in Dockerfile - no action needed):
# XDG_CONFIG_HOME=/tmp/.chromium
# XDG_CACHE_HOME=/tmp/.chromium
# (These fix the "chrome_crashpad_handler: --database is required" error)
#
# üí° TIP: Leave these commented unless you have specific requirements

# ============================================================================
# RIPTIDE-API: Memory Management Configuration (10 variables)
# ============================================================================

# Maximum memory per request in MB
RIPTIDE_MAX_MEMORY_PER_REQUEST_MB=256

# Global memory limit in MB
RIPTIDE_GLOBAL_MEMORY_LIMIT_MB=2048

# Memory soft limit - trigger warnings in MB (QW-3)
RIPTIDE_MEMORY_SOFT_LIMIT_MB=400

# Memory hard limit - reject requests in MB (QW-3)
RIPTIDE_MEMORY_HARD_LIMIT_MB=500

# Memory pressure detection threshold (0.0-1.0)
RIPTIDE_MEMORY_PRESSURE_THRESHOLD=0.85

# Enable automatic garbage collection (true/false)
RIPTIDE_MEMORY_AUTO_GC=true

# GC trigger threshold in MB
RIPTIDE_MEMORY_GC_TRIGGER_THRESHOLD_MB=1024

# Memory monitoring interval in seconds
RIPTIDE_MEMORY_MONITORING_INTERVAL_SECS=30

# Enable memory leak detection (true/false)
RIPTIDE_MEMORY_ENABLE_LEAK_DETECTION=true

# Enable proactive memory monitoring (true/false, QW-3)
RIPTIDE_MEMORY_ENABLE_PROACTIVE_MONITORING=true

# ============================================================================
# RIPTIDE-API: PDF Processing Configuration (6 variables)
# ============================================================================

# Maximum concurrent PDF operations (2 semaphore requirement)
RIPTIDE_PDF_MAX_CONCURRENT=2

# PDF processing timeout in seconds
RIPTIDE_PDF_PROCESSING_TIMEOUT_SECS=30

# Maximum PDF file size in MB
RIPTIDE_PDF_MAX_FILE_SIZE_MB=100

# Enable PDF streaming processing (true/false)
RIPTIDE_PDF_ENABLE_STREAMING=true

# PDF queue size
RIPTIDE_PDF_QUEUE_SIZE=50

# Priority queue timeout in seconds
RIPTIDE_PDF_QUEUE_TIMEOUT_SECS=60

# ============================================================================
# RIPTIDE-API: WASM Runtime Configuration (7 variables)
# ============================================================================

# Single instance per worker (requirement)
RIPTIDE_WASM_INSTANCES_PER_WORKER=1

# WASM module timeout in seconds
RIPTIDE_WASM_MODULE_TIMEOUT_SECS=10

# Maximum WASM memory in MB
RIPTIDE_WASM_MAX_MEMORY_MB=128

# Enable WASM instance recycling (true/false)
RIPTIDE_WASM_ENABLE_RECYCLING=false

# Instance health check interval in seconds
RIPTIDE_WASM_HEALTH_CHECK_INTERVAL_SECS=120

# Maximum operations per instance
RIPTIDE_WASM_MAX_OPERATIONS_PER_INSTANCE=10000

# Instance restart threshold
RIPTIDE_WASM_RESTART_THRESHOLD=10

# ============================================================================
# LLM/AI Provider Configuration
# ============================================================================

# OpenAI Configuration
# OPENAI_API_KEY=sk-...
# OPENAI_BASE_URL=https://api.openai.com/v1

# Anthropic/Claude Configuration
# ANTHROPIC_API_KEY=sk-ant-...

# Azure OpenAI Configuration
# AZURE_OPENAI_KEY=your_azure_key
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com

# Ollama Configuration (local LLM)
# OLLAMA_BASE_URL=http://localhost:11434

# ============================================================================
# Telemetry & Observability
# ============================================================================

# Enable telemetry collection
TELEMETRY_ENABLED=true

# Service name for telemetry
TELEMETRY_SERVICE_NAME=riptide-api

# Service version (defaults to CARGO_PKG_VERSION)
# TELEMETRY_SERVICE_VERSION=1.0.0

# OpenTelemetry OTLP endpoint
# TELEMETRY_OTLP_ENDPOINT=http://localhost:4317

# Alternative OTEL endpoint
# OTEL_ENDPOINT=http://localhost:4317

# Telemetry exporter type: "otlp" or "stdout"
TELEMETRY_EXPORTER_TYPE=stdout

# Sampling ratio (0.0-1.0)
TELEMETRY_SAMPLING_RATIO=1.0

# Export timeout in seconds
TELEMETRY_EXPORT_TIMEOUT_SECS=30

# Maximum queue size
TELEMETRY_MAX_QUEUE_SIZE=2048

# Maximum export batch size
TELEMETRY_MAX_EXPORT_BATCH_SIZE=512

# ============================================================================
# Authentication & Security
# ============================================================================

# Comma-separated valid API keys
# API_KEYS=key1,key2,key3

# Require authentication (true/false)
REQUIRE_AUTH=false

# Enable HTTPS/TLS
# RIPTIDE_ENABLE_TLS=false

# TLS certificate path
# RIPTIDE_TLS_CERT_PATH=/path/to/cert.pem

# TLS key path
# RIPTIDE_TLS_KEY_PATH=/path/to/key.pem

# ============================================================================
# Spider/Crawler Configuration
# ============================================================================

# Enable spider/crawler functionality (set to true to enable deep crawling)
SPIDER_ENABLE=false

# Spider configuration (when enabled)
# Base URL for spider operations (required when SPIDER_ENABLE=true)
# SPIDER_BASE_URL=https://example.com

# Maximum crawl depth (default: 10)
SPIDER_MAX_DEPTH=3

# Maximum pages to crawl (default: 1000)
SPIDER_MAX_PAGES=100

# Concurrent requests (default: 4)
SPIDER_CONCURRENCY=4

# Request timeout in seconds (default: 30)
SPIDER_TIMEOUT_SECONDS=30

# Delay between requests in milliseconds (default: 500)
SPIDER_DELAY_MS=500

# Respect robots.txt (default: true)
SPIDER_RESPECT_ROBOTS=true

# User agent string (default: "RipTide Spider/1.0")
# SPIDER_USER_AGENT=RipTide Spider/1.0

# ============================================================================
# Enhanced Pipeline Configuration
# ============================================================================

# Enable enhanced processing pipeline
ENHANCED_PIPELINE_ENABLE=true

# Enhanced pipeline metrics
ENHANCED_PIPELINE_METRICS=true

# Enhanced pipeline debug logging
# ENHANCED_PIPELINE_DEBUG=true

# Pipeline timeouts (seconds)
# ENHANCED_PIPELINE_FETCH_TIMEOUT=10
# ENHANCED_PIPELINE_GATE_TIMEOUT=5
# ENHANCED_PIPELINE_WASM_TIMEOUT=5
# ENHANCED_PIPELINE_RENDER_TIMEOUT=3

# ============================================================================
# Worker Configuration
# ============================================================================

# Worker pool size
WORKER_POOL_SIZE=4

# Maximum batch size for worker operations
# WORKER_MAX_BATCH_SIZE=100

# Maximum concurrency for workers
# WORKER_MAX_CONCURRENCY=10

# Enable worker scheduler
# WORKER_ENABLE_SCHEDULER=true

# Worker timeout in seconds
# RIPTIDE_WORKER_TIMEOUT=60

# Worker retry attempts
# RIPTIDE_WORKER_MAX_RETRIES=3

# ============================================================================
# RIPTIDE-PERSISTENCE: Redis Configuration (9 variables)
# ============================================================================

# Redis connection URL
REDIS_URL=redis://localhost:6379

# Connection pool size
REDIS_POOL_SIZE=10

# Connection timeout in milliseconds
REDIS_CONNECTION_TIMEOUT_MS=5000

# Command timeout in milliseconds
REDIS_COMMAND_TIMEOUT_MS=5000

# Enable Redis Cluster mode (true/false)
REDIS_CLUSTER_MODE=false

# Retry attempts for failed operations
REDIS_RETRY_ATTEMPTS=3

# Retry delay in milliseconds
REDIS_RETRY_DELAY_MS=100

# Enable pipelining for bulk operations (true/false)
REDIS_ENABLE_PIPELINING=true

# Maximum pipeline size
REDIS_MAX_PIPELINE_SIZE=100

# ============================================================================
# RIPTIDE-PERSISTENCE: Cache Configuration (11 variables)
# ============================================================================

# Default TTL in seconds (24 hours)
CACHE_DEFAULT_TTL_SECONDS=86400

# Maximum entry size in bytes (20MB)
CACHE_MAX_ENTRY_SIZE_BYTES=20971520

# Cache key prefix
CACHE_KEY_PREFIX=riptide

# Cache version for invalidation
CACHE_VERSION=v1

# Enable compression (true/false)
CACHE_ENABLE_COMPRESSION=true

# Compression threshold in bytes (1KB)
CACHE_COMPRESSION_THRESHOLD_BYTES=1024

# Compression algorithm: lz4, zstd, none
CACHE_COMPRESSION_ALGORITHM=lz4

# Enable cache warming (true/false)
CACHE_ENABLE_WARMING=true

# Warming batch size
CACHE_WARMING_BATCH_SIZE=100

# Maximum cache memory usage in bytes (optional)
# CACHE_MAX_MEMORY_BYTES=1073741824

# Cache eviction policy: LRU, LFU, TTL, Random
CACHE_EVICTION_POLICY=LRU

# ============================================================================
# RIPTIDE-PERSISTENCE: State Management Configuration (8 variables)
# ============================================================================

# Session timeout in seconds (30 minutes)
STATE_SESSION_TIMEOUT_SECONDS=1800

# Enable configuration hot reload (true/false)
STATE_ENABLE_HOT_RELOAD=true

# Configuration file watch paths (comma-separated)
STATE_CONFIG_WATCH_PATHS=./config

# Checkpoint interval in seconds (5 minutes)
STATE_CHECKPOINT_INTERVAL_SECONDS=300

# Maximum number of checkpoints to keep
STATE_MAX_CHECKPOINTS=10

# Checkpoint compression (true/false)
STATE_CHECKPOINT_COMPRESSION=true

# Enable graceful shutdown with state preservation (true/false)
STATE_ENABLE_GRACEFUL_SHUTDOWN=true

# Shutdown timeout in seconds
STATE_SHUTDOWN_TIMEOUT_SECONDS=30

# ============================================================================
# RIPTIDE-PERSISTENCE: Tenant Configuration (6 variables)
# ============================================================================

# Enable multi-tenancy (true/false)
TENANT_ENABLED=true

# Tenant isolation level: none, logical, strong
TENANT_ISOLATION_LEVEL=strong

# Enable billing tracking (true/false)
TENANT_ENABLE_BILLING=true

# Billing aggregation interval in seconds
TENANT_BILLING_INTERVAL_SECONDS=60

# Maximum tenants per instance
TENANT_MAX_TENANTS=1000

# Tenant data encryption (true/false)
TENANT_ENABLE_ENCRYPTION=true

# ============================================================================
# RIPTIDE-PERSISTENCE: Performance Configuration (11 variables)
# ============================================================================

# Target cache access time in milliseconds
PERF_TARGET_CACHE_ACCESS_MS=5

# Enable performance monitoring (true/false)
PERF_ENABLE_MONITORING=true

# Metrics collection interval in seconds
PERF_METRICS_INTERVAL_SECONDS=60

# Enable slow operation logging (true/false)
PERF_ENABLE_SLOW_LOG=true

# Slow operation threshold in milliseconds
PERF_SLOW_THRESHOLD_MS=100

# Enable connection pooling (true/false)
PERF_ENABLE_CONNECTION_POOLING=true

# Connection pool minimum size
POOL_MIN_SIZE=2

# Connection pool maximum size
POOL_MAX_SIZE=10

# Connection idle timeout in seconds
POOL_IDLE_TIMEOUT_SECONDS=600

# Maximum connection lifetime in seconds
POOL_MAX_LIFETIME_SECONDS=3600

# ============================================================================
# RIPTIDE-PERSISTENCE: Security Configuration (6 variables)
# ============================================================================

# Enable encryption at rest (true/false)
SECURITY_ENABLE_ENCRYPTION_AT_REST=false

# Encryption key (required if encryption at rest is enabled)
# SECURITY_ENCRYPTION_KEY=your-secret-key-here

# Enable audit logging (true/false)
SECURITY_ENABLE_AUDIT_LOGGING=true

# Audit log retention in days
SECURITY_AUDIT_RETENTION_DAYS=30

# Enable rate limiting (true/false)
SECURITY_ENABLE_RATE_LIMITING=true

# Enable RBAC (true/false)
SECURITY_ENABLE_RBAC=false

# ============================================================================
# RIPTIDE-PERSISTENCE: Distributed Configuration (8 variables) - Optional
# ============================================================================

# Enable distributed coordination (true/false)
# DISTRIBUTED_ENABLED=false

# Coordinator type: redis, consul, etcd, memory
# DISTRIBUTED_COORDINATOR_TYPE=redis

# Node ID (auto-generated if not specified)
# DISTRIBUTED_NODE_ID=node-1

# Cluster nodes (comma-separated)
# DISTRIBUTED_CLUSTER_NODES=node1:8080,node2:8080

# Consensus timeout in milliseconds
# DISTRIBUTED_CONSENSUS_TIMEOUT_MS=5000

# Leader election timeout in milliseconds
# DISTRIBUTED_LEADER_ELECTION_TIMEOUT_MS=10000

# Heartbeat interval in milliseconds
# DISTRIBUTED_HEARTBEAT_INTERVAL_MS=1000

# ============================================================================
# RIPTIDE-POOL: WASM Pool Configuration (13 variables)
# ============================================================================

# Maximum number of WASM instances
POOL_MAX_INSTANCES=4

# Enable performance metrics (true/false)
POOL_ENABLE_METRICS=true

# General timeout in milliseconds
POOL_TIMEOUT_MS=5000

# Memory limit in WASM pages (1 page = 64KB)
POOL_MEMORY_LIMIT_PAGES=256

# Extraction timeout in milliseconds
POOL_EXTRACTION_TIMEOUT_MS=30000

# Maximum pool size
POOL_MAX_POOL_SIZE=8

# Initial pool size
POOL_INITIAL_POOL_SIZE=2

# Epoch timeout in milliseconds
POOL_EPOCH_TIMEOUT_MS=60000

# Health check interval in milliseconds
POOL_HEALTH_CHECK_INTERVAL_MS=30000

# Memory limit in bytes (512MB)
POOL_MEMORY_LIMIT_BYTES=536870912

# Circuit breaker timeout in milliseconds
POOL_CIRCUIT_BREAKER_TIMEOUT_MS=5000

# Circuit breaker failure threshold
POOL_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Enable WIT (WebAssembly Interface Types) validation (true/false)
POOL_ENABLE_WIT_VALIDATION=true

# ============================================================================
# Legacy Variables (for backward compatibility)
# ============================================================================

# Cache TTL in seconds
CACHE_TTL=86400

# Enable compression for cache
ENABLE_COMPRESSION=true

# Enable multi-tenancy
ENABLE_MULTI_TENANCY=false

# ============================================================================
# Circuit Breaker Configuration
# ============================================================================

# Circuit breaker failure threshold (percentage 0-100)
CIRCUIT_BREAKER_FAILURE_THRESHOLD=50

# Circuit breaker timeout in milliseconds
CIRCUIT_BREAKER_TIMEOUT_MS=5000

# Circuit breaker minimum requests before opening
CIRCUIT_BREAKER_MIN_REQUESTS=5

# Circuit breaker recovery timeout in seconds
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=60

# ============================================================================
# Streaming Configuration
# ============================================================================

# Stream buffer size
STREAM_BUFFER_SIZE=8192

# Maximum stream buffer size
STREAM_BUFFER_MAX_SIZE=65536

# WebSocket maximum message size
WS_MAX_MESSAGE_SIZE=16777216

# WebSocket ping interval in seconds
WS_PING_INTERVAL=30

# Maximum concurrent streams
STREAM_MAX_CONCURRENT=100

# Default stream timeout in seconds
STREAM_DEFAULT_TIMEOUT=300

# Enable stream rate limiting
STREAM_RATE_LIMIT_ENABLED=true

# Stream rate limit (requests per second)
STREAM_RATE_LIMIT_RPS=10

# ============================================================================
# Development & Testing
# ============================================================================

# Logging level (error, warn, info, debug, trace)
RUST_LOG=info

# Enable development mode
# RIPTIDE_DEV_MODE=false

# Health check port (optional, defaults to main API port)
# HEALTH_CHECK_PORT=8081

# Git SHA for versioning (auto-populated in CI/CD)
# GIT_SHA=abc123

# Build timestamp (auto-populated in CI/CD)
# BUILD_TIMESTAMP=2024-01-01T00:00:00Z

# Test environment configuration
# TEST_REDIS_URL=redis://localhost:6379/15
# TEST_WASM_PATH=./test-wasm/extractor.wasm
# SKIP_PERSISTENCE_TESTS=true
# SKIP_REDIS_TESTS=true

# Test timeout multiplier
# TEST_TIMEOUT_MULTIPLIER=2.0

# Feature flags for testing
# RIPTIDE_FEATURE_PDF=true
# RIPTIDE_FEATURE_BENCHMARKS=true
# RIPTIDE_FEATURE_API_INTEGRATION=true

# ============================================================================
# Proxy Configuration
# ============================================================================

# HTTP/HTTPS proxy settings
# HTTP_PROXY=http://proxy.example.com:8080
# HTTPS_PROXY=http://proxy.example.com:8080
# NO_PROXY=localhost,127.0.0.1

# ============================================================================
# Resource Monitoring
# ============================================================================

# Enable resource monitoring
# RIPTIDE_RESOURCE_MONITORING=true

# Resource monitoring interval in seconds
# RIPTIDE_RESOURCE_MONITORING_INTERVAL=30

# Resource cleanup interval in seconds
# RIPTIDE_RESOURCE_CLEANUP_INTERVAL=60

# Resource health check interval in seconds
# RIPTIDE_RESOURCE_HEALTH_CHECK_INTERVAL=30

# ============================================================================
# Database Configuration (if applicable)
# ============================================================================

# Database URL
# DATABASE_URL=postgresql://user:password@localhost:5432/riptide

# Database pool size
# DATABASE_POOL_SIZE=10

# Database connection timeout in seconds
# DATABASE_TIMEOUT=30

# ============================================================================
# Backup & Recovery
# ============================================================================

# Enable automatic backups
# RIPTIDE_BACKUP_ENABLED=false

# Backup directory
# RIPTIDE_BACKUP_DIR=./backups

# Backup interval in hours
# RIPTIDE_BACKUP_INTERVAL_HOURS=24

# Backup retention days
# RIPTIDE_BACKUP_RETENTION_DAYS=7

# ============================================================================
# End of Configuration
# ============================================================================
