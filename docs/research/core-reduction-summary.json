{
  "analysis_date": "2025-10-18",
  "researcher": "RESEARCHER Agent",
  "session_id": "swarm-1760788822241-396559ecx",
  "current_state": {
    "total_lines": 17500,
    "rust_files": 40,
    "target_lines": 10000,
    "reduction_needed": 7500
  },
  "extraction_candidates": [
    {
      "rank": 1,
      "name": "Instance Pool System",
      "new_crate": "riptide-pool",
      "lines": 2500,
      "total_available": 4285,
      "ease": "medium",
      "priority": "HIGH",
      "risk": "low",
      "files": [
        "instance_pool/pool.rs (1005 lines)",
        "instance_pool/health.rs (200 lines)",
        "instance_pool/memory.rs (150 lines)",
        "instance_pool/models.rs (100 lines)",
        "memory_manager.rs (1107 lines - partial)",
        "pool_health.rs (792 lines)",
        "cache_warming.rs (881 lines - pool portions)"
      ],
      "dependencies": ["riptide-events", "riptide-monitoring", "riptide-security"],
      "circular_risk": false
    },
    {
      "rank": 2,
      "name": "Event System",
      "new_crate": "riptide-events",
      "lines": 2300,
      "total_available": 2876,
      "ease": "high",
      "priority": "HIGH",
      "risk": "very_low",
      "files": [
        "events/bus.rs (513 lines)",
        "events/handlers.rs (717 lines)",
        "events/types.rs (767 lines)",
        "events/pool_integration.rs (535 lines)",
        "events/mod.rs (344 lines)"
      ],
      "dependencies": ["riptide-monitoring"],
      "circular_risk": false
    },
    {
      "rank": 3,
      "name": "Cache System",
      "new_crate": "riptide-cache (enhanced)",
      "lines": 1800,
      "total_available": 2127,
      "ease": "high",
      "priority": "MEDIUM",
      "risk": "low",
      "files": [
        "cache.rs (381 lines)",
        "cache_key.rs (313 lines)",
        "integrated_cache.rs (402 lines)",
        "cache_warming.rs (881 lines - cache portions)",
        "cache_warming_integration.rs (150 lines)"
      ],
      "dependencies": ["riptide-events", "riptide-monitoring"],
      "circular_risk": false
    },
    {
      "rank": 4,
      "name": "Strategy Composition",
      "new_crate": "riptide-strategies",
      "lines": 800,
      "total_available": 2568,
      "ease": "high",
      "priority": "MEDIUM",
      "risk": "very_low",
      "files": [
        "strategy_composition.rs (782 lines)",
        "conditional.rs (423 lines - partial)",
        "confidence.rs (511 lines - partial)",
        "confidence_integration.rs (373 lines - partial)",
        "dynamic.rs (479 lines - partial)"
      ],
      "dependencies": ["riptide-extraction"],
      "circular_risk": false,
      "note": "Some files have cross-cutting concerns, extract carefully"
    },
    {
      "rank": 5,
      "name": "Reliability Layer",
      "new_crate": "riptide-reliability",
      "lines": 900,
      "total_available": 1637,
      "ease": "medium",
      "priority": "LOW",
      "risk": "medium",
      "files": [
        "reliability.rs (542 lines)",
        "circuit_breaker.rs (406 lines)",
        "circuit.rs (364 lines)",
        "gate.rs (325 lines)"
      ],
      "dependencies": ["riptide-extraction", "riptide-events"],
      "circular_risk": false,
      "note": "High coupling to core, extract in Phase 3"
    },
    {
      "rank": 6,
      "name": "AI Processor",
      "new_crate": "riptide-intelligence (extend)",
      "lines": 500,
      "total_available": 482,
      "ease": "low",
      "priority": "LOW",
      "risk": "high",
      "files": [
        "ai_processor.rs (482 lines)"
      ],
      "dependencies": ["riptide-extraction", "riptide-intelligence"],
      "circular_risk": false,
      "note": "High coupling, extract in Phase 4"
    }
  ],
  "phase_2_plan": {
    "name": "Core Reduction - Phase 2",
    "timeline": "3 weeks",
    "phases": [
      {
        "phase": "2A",
        "name": "Events System Extraction",
        "week": 1,
        "crate": "riptide-events",
        "lines_reduced": 2300,
        "core_after": 15200,
        "risk": "low",
        "steps": [
          "Create crates/riptide-events",
          "Move events/ directory",
          "Update riptide-monitoring imports",
          "Update riptide-core imports",
          "Run full test suite"
        ]
      },
      {
        "phase": "2B",
        "name": "Instance Pool Extraction",
        "week": 2,
        "crate": "riptide-pool",
        "lines_reduced": 2500,
        "core_after": 12700,
        "risk": "medium",
        "steps": [
          "Create crates/riptide-pool",
          "Move instance_pool/ directory",
          "Extract memory_manager.rs portions",
          "Extract pool_health.rs",
          "Extract cache_warming.rs pool portions",
          "Update all imports"
        ]
      },
      {
        "phase": "2C",
        "name": "Enhanced Cache System",
        "week": 3,
        "crate": "riptide-cache",
        "lines_reduced": 1800,
        "core_after": 10900,
        "risk": "low",
        "steps": [
          "Move cache.rs to riptide-cache",
          "Move cache_key.rs to riptide-cache",
          "Move integrated_cache.rs to riptide-cache",
          "Move cache_warming.rs cache portions",
          "Update documentation"
        ]
      }
    ],
    "total_reduction": 6600,
    "final_core_size": 10900,
    "target_achieved": true
  },
  "files_to_keep_in_core": [
    "lib.rs (300 lines)",
    "types.rs (200 lines)",
    "error.rs (512 lines)",
    "common/error_conversions.rs (358 lines)",
    "common/mod.rs (150 lines)",
    "component.rs (150 lines)",
    "robots.rs (481 lines)",
    "wasm_validation.rs (293 lines)",
    "benchmarks.rs (487 lines)",
    "instance_pool_tests.rs (385 lines)",
    "fetch_engine_tests.rs (375 lines)"
  ],
  "estimated_core_after_phase2": {
    "total_lines": 10900,
    "core_logic": 3525,
    "strategy_system": 2568,
    "reliability_system": 1637,
    "test_files": 760,
    "error_handling": 870,
    "common_utilities": 1103,
    "misc": 1437
  },
  "success_metrics": {
    "reduction_percentage": 38,
    "new_crates": 2,
    "enhanced_crates": 1,
    "test_coverage_maintained": true,
    "zero_breaking_changes": true,
    "zero_circular_deps": true
  },
  "recommendations": {
    "immediate_action": "Execute Phase 2A-2C",
    "timeline": "3 weeks",
    "next_phase": "Phase 3 (Strategy & Reliability extraction)",
    "final_target": "9200 lines (Phase 3)"
  }
}
