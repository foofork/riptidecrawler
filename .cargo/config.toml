[build]
# Use default target for the platform
target = "x86_64-unknown-linux-gnu"

# Note: Removed forced linker selection to allow cargo and dependencies
# (like pdfium-render) to choose appropriate linker based on availability

# Native x86_64 builds - OK to optimize for specific CPU features
[target.'cfg(all(target_arch = "x86_64", not(target_family = "wasm")))']
rustflags = [
  "-C", "target-cpu=native",
]

# WASM builds - must NOT inherit x86 CPU flags
[target.wasm32-wasi]
rustflags = []

[target.wasm32-wasip2]
rustflags = []
